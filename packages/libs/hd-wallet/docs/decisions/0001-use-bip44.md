# Use BIP44

Date: 2023-10-31

Status: accepted

## Context

In the context of HD (Hierarchical Deterministic) wallets, keys are generated
using the BIP32 algorithm. BIP32 allows for various approaches in defining
derivation paths, as it accepts a derivation path to create branched key trees.

## Decision

We have opted to utilize the [BIP44][1] protocol for our HD wallet
implementation. This decision is based on the following considerations:

- KDA (Kadena) uses coin-type [626][2].
- KDA is an account-model coin, and for each key, we change the account (third
  item in BIP44).
- All keys are hardened due to the [ed25519][3] public key generation algorithm,
  which is enforced by Kadena, necessitating hardened key restrictions.

As a result, the derivation path for our HD wallet will be as follows:

```
m/44'/626'/${index}'/0'/0'
```

## Consequences

- We use a standard approach for key derivation which would be more compatible
  with other blockchians
- finding library for implementation would be easier

- We have to managed legacy algorithm like chainweaver for backward
  compatibility

- Some wallets already use `m/44'/626'/0'/0'/${index}'` instead of the adopted
  approach. So we need to support this path as well

- Since Kadena using ed25519 (only hardened keys) we can not use extended keys
  mentioned in the BIP44 protocol

## Resources

- [BIP44 proposal][1]
- [SLIP-0044 : Registered coin types for BIP-0044][2]
- [SLIP-0010 : Universal private key derivation from master private key][3]

[1]: https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki
[2]: https://github.com/satoshilabs/slips/blob/master/slip-0044.md
[3]: https://github.com/satoshilabs/slips/blob/master/slip-0010.md
